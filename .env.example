# CLIProxyAPI Stack Environment Configuration
# Generated by install.sh — copy to infrastructure/.env and fill in values
# NEVER commit real secrets to version control

# =============================================================================
# Domain Configuration
# =============================================================================
DOMAIN=example.com
DASHBOARD_SUBDOMAIN=dashboard
API_SUBDOMAIN=api

# =============================================================================
# Database (PostgreSQL)
# =============================================================================
# Full connection string used by the dashboard (Prisma)
DATABASE_URL=postgresql://cliproxyapi:CHANGE_ME_POSTGRES_PASSWORD@postgres:5432/cliproxyapi
# Password for the Postgres container
POSTGRES_PASSWORD=CHANGE_ME_POSTGRES_PASSWORD

# =============================================================================
# Dashboard Authentication
# =============================================================================
# Secret key for signing JWT tokens (generate with: openssl rand -base64 32)
JWT_SECRET=CHANGE_ME_JWT_SECRET

# =============================================================================
# CLIProxyAPI Management API
# =============================================================================
# Key to authenticate dashboard → CLIProxyAPI management requests
# Must match MANAGEMENT_PASSWORD env var in CLIProxyAPI container
MANAGEMENT_API_KEY=CHANGE_ME_MANAGEMENT_KEY
# Internal URL for management API (Docker network)
CLIPROXYAPI_MANAGEMENT_URL=http://cliproxyapi:8317/v0/management

# =============================================================================
# Usage Collector (Cron)
# =============================================================================
# Optional: API key for external cron job to trigger usage collection
# without a browser session. Use with: curl -X POST /api/usage/collect
#   -H "Authorization: Bearer <this-key>"
# Generate with: openssl rand -hex 32
COLLECTOR_API_KEY=

# =============================================================================
# Installation Directory
# =============================================================================
INSTALL_DIR=/opt/cliproxyapi

# =============================================================================
# General
# =============================================================================
TZ=UTC

# =============================================================================
# Logging
# =============================================================================
# Pino log level: fatal, error, warn, info, debug, trace
LOG_LEVEL=info

# =============================================================================
# Perplexity Pro Sidecar (Optional)
# =============================================================================
# Session cookies from your Perplexity Pro account (JSON object).
# Get them from browser DevTools: Application → Cookies → perplexity.ai
# Example: {"next-auth.session-token":"eyJ...","next-auth.csrf-token":"abc..."}
PERPLEXITY_COOKIES=

# =============================================================================
# Derived URLs (for reference only)
# =============================================================================
# DASHBOARD_URL=https://dashboard.example.com
# API_URL=https://api.example.com
